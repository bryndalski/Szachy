<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: MongoOperations.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: MongoOperations.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @alias  (MongoOperations) Operacje logowania/użytkownika na mongodb
 * @class
 *
 */
class MongoOperations {
  /**
   *
   */
  constructor() {
    this.collection = null;
    this.ObjectID = null;
  }

  //methods
  /**
   *
   * @param {collection} collection kolekcja
   * @param {id} ObjectID id objektu
   */
  selectCollection(collection, ObjectID) {
    this.collection = collection;
    this.ObjectID = ObjectID;
  }
  /**
   *
   * @param {object} data objekt do dodania
   * @returns {Promise&lt;boolean>}
   */
  insert(data) {
    return new Promise((suc, err) => {
      this.collection
        .insertOne(data)
        .then((result) => suc(result))
        .catch((err) => err(err));
    });
  }
  /**
   * Pobiera wszystkie wartości z bazy danych
   *
   * @returns {Promise&lt;object>}
   */
  getAll() {
    return new Promise((suc, err) => {
      this.collection.find({}).toArray(function (err, items) {
        suc(items);
      });
    });
  }
  /**
   *
   * @param {string} id Id obiektu
   * @returns
   */
  delete(id) {
    return new Promise((suc, err) => {
      this.collection.deleteOne({ _id: this.ObjectID(id) }).then((data) => {
        suc(data);
      });
    });
  }
  /**
   * Służąca do update
   *
   * @param {JSON} data dane do update
   * @returns {Promise&lt;boolean>}
   */
  update(data) {
    return new Promise((suc, err) => {
      console.log(data);
      this.collection
        .updateOne(
          { _id: this.ObjectID(data._id) },
          { $set: { password: data.password, login: data.login } }
        )
        .then((data) => suc(data));
    });
  }
  /**
   *
   * @param {MONGO_ID} _id mogno db id
   * @param {String} password crypted password
   * @returns
   */
  changePassword(_id, password) {
    return new Promise(async (suc) => {
      suc(
        await this.collection.updateOne(
          { _id: this.ObjectID(_id) },
          { $set: { password: password } }
        )
      );
    });
  }

  /**
   *
   * @param {JSON} data object containg nickname
   * @returns {Promise&lt;JSON>} returns JSON or null
   */
  getOne(data) {
    return new Promise((suc) => {
      this.collection
        .findOne({ nickname: data.nickname })
        .then((result) => suc(result));
    });
  }
}
module.exports = new MongoOperations();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="(MongoOperations)%2520Operacje%2520logowania_u%25C5%25BCytkownika%2520na%2520mongodb.html">(MongoOperations) Operacje logowania/użytkownika na mongodb</a></li><li><a href="-_.html">(Session)</a></li><li><a href="-__.html">(User)</a></li><li><a href="Room.html">Room</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Jun 11 2021 15:41:22 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
